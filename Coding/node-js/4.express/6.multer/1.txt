# multer
Node.js/Express에서 파일 업로드(특히 multipart/form-data)를 쉽게 처리할 수 있게 해주는 미들웨어

주요 특징
이미지, 문서 등 파일 업로드 지원
업로드 파일의 저장 위치, 파일명 등 다양한 옵션 제공
여러 파일 동시 업로드, 필드별 파일 업로드 등 지원

npm i multer

const multer = require("multer")

multer.diskStorage - 서버의 디스크에 저장
multer.memoryStorage - 버퍼로 메모리에 저장


만들어진 upload는 보통 use가 아닌 post에 장착하여 사용한다.
이유는 해당 업로드는 전체에서 전부 사용되는게 아니라 한군데에서만 사용되기 때문

const upload = {
  ...
}

// single은 파일을 하나만 업로드 할 때
// "image"는 HTML에서 지정한 name 속성 값 - 일치해야한다.
// input이 multiple일 경우에는 upload.array("image")와 같이 사용
// input이 여러개일 경우에는 upload.fields([{name: "image1"}, {name: "image2"}])와 같이 사용
// 이미지가 없을 경우에는 upload.none을 사용한다. - form의 enctype가 multipart/form-data일 경우에는 어떤 이미지 값이 있을 수 있으니 안넣는다는 것으로 설정해준다.
app.post("/upload", upload.single("image"), (req, res) => {
  console.log(req.file) // 업로드된 파일 정보
  res.send("파일 업로드 완료")
})

console.log(req.file)을 넣으면 업로드를 하고 아래와 같은 로그가 나온다.
{
  fieldname: 'image',
  originalname: 'jururu.png',
  encoding: '7bit',
  mimetype: 'image/png',
  destination: 'uploads/',
  filename: 'jururu-1755439035244.png',
  path: 'uploads/jururu-1755439035244.png',
  size: 182032
}
